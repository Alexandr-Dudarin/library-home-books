(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const d="books";class h{books=[];constructor(){this.load()}getAll(){return this.books}getByCategory(e){return this.books.filter(n=>n.category===e)}add(e){this.books.push(e),this.save()}delete(e){this.books=this.books.filter(n=>n.id!==e),this.save()}update(e){this.books=this.books.map(n=>n.id===e.id?e:n),this.save()}save(){localStorage.setItem(d,JSON.stringify(this.books))}load(){const e=localStorage.getItem(d);e&&(this.books=JSON.parse(e))}}const u={Fantasy:"Fantasy",Detective:"Detective",Science:"Science",Novel:"Novel"},y={Fantasy:"ðŸ§™",Detective:"ðŸ•µï¸",Science:"ðŸ”¬",Novel:"ðŸ“–"};function m(s,e,n){const i=document.querySelector("#categories");i.innerHTML="";const t=document.createElement("li");t.textContent=`Ð’ÑÐµ (${e?e.length:0})`,s===null&&t.classList.add("active"),t.addEventListener("click",()=>n(null)),i.appendChild(t),Object.values(u).forEach(o=>{const r=document.createElement("li"),c=e?e.filter(l=>l.category===o).length:0;r.textContent=`${y[o]} ${o} (${c})`,o===s&&r.classList.add("active"),r.addEventListener("click",()=>n(o)),i.appendChild(r)})}function f(s,e,n){const i=document.querySelector("#books");i.innerHTML="",s.forEach(t=>{const o=document.createElement("li"),r=document.createElement("span");r.textContent=`${t.title} â€” ${t.author}`,r.addEventListener("click",()=>n(t));const c=document.createElement("button");c.textContent="âŒ",c.addEventListener("click",()=>e(t.id)),o.append(r,c),i.appendChild(o)})}function p(s,e){const n=document.querySelector("#bookForm"),i=document.querySelector("#title"),t=document.querySelector("#author"),o=document.querySelector("#category"),r=document.querySelector("#cancelEdit");Object.values(u).forEach(c=>{const l=document.createElement("option");l.value=c,l.textContent=c,o.appendChild(l)}),n.addEventListener("submit",c=>{c.preventDefault(),s({title:i.value,author:t.value,category:o.value}),n.reset()}),e&&r.addEventListener("click",()=>{n.reset(),e()})}function a(s){const e=document.querySelector('#bookForm button[type="submit"]');e.textContent=s?"ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ½Ð¸Ð³Ñƒ":"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ½Ð¸Ð³Ñƒ"}class g{selectedCategory=null;editingId=null;library;constructor(e){this.library=e,p(this.handleAddBook,this.handleCancelEdit),a(!1),this.render()}handleCancelEdit=()=>{this.editingId=null,a(!1),document.querySelector("#bookForm").reset()};handleCategorySelect=e=>{this.selectedCategory=e,this.render()};handleEditBook=e=>{this.editingId=e.id;const n=document.querySelector("#title"),i=document.querySelector("#author"),t=document.querySelector("#category");n.value=e.title,i.value=e.author,t.value=e.category,a(!0)};handleAddBook=e=>{this.editingId?(this.library.update({id:this.editingId,...e}),this.editingId=null):this.library.add({id:crypto.randomUUID(),...e}),a(!1),this.render()};handleDeleteBook=e=>{this.library.delete(e),this.render()};render(){const e=this.library.getAll();m(this.selectedCategory,e,this.handleCategorySelect);const n=this.selectedCategory?this.library.getByCategory(this.selectedCategory):e;f(n,this.handleDeleteBook,this.handleEditBook)}}const v=new h;new g(v);
