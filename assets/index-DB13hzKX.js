(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const a="books";class h{books=[];constructor(){this.load()}getAll(){return this.books}getByCategory(e){return this.books.filter(r=>r.category===e)}add(e){this.books.push(e),this.save()}delete(e){this.books=this.books.filter(r=>r.id!==e),this.save()}update(e){this.books=this.books.map(r=>r.id===e.id?e:r),this.save()}save(){localStorage.setItem(a,JSON.stringify(this.books))}load(){const e=localStorage.getItem(a);e&&(this.books=JSON.parse(e))}}const d={Fantasy:"Fantasy",Detective:"Detective",Science:"Science",Novel:"Novel"},y={Fantasy:"ðŸ§™",Detective:"ðŸ•µï¸",Science:"ðŸ”¬",Novel:"ðŸ“–"};function m(i,e,r){const s=document.querySelector("#categories");s.innerHTML="";const t=document.createElement("li");t.textContent=`Ð’ÑÐµ (${e.length})`,i===null&&t.classList.add("active"),t.addEventListener("click",()=>r(null)),s.appendChild(t),Object.values(d).forEach(o=>{const n=document.createElement("li"),l=e.filter(u=>u.category===o).length;n.textContent=`${y[o]} ${o} (${l})`,o===i&&n.classList.add("active"),n.addEventListener("click",()=>r(o)),s.appendChild(n)})}function f(i,e,r){const s=document.querySelector("#books");s.innerHTML="",i.forEach(t=>{const o=document.createElement("li"),n=document.createElement("span");n.textContent=`${t.title} â€” ${t.author}`,n.addEventListener("click",()=>r(t));const l=document.createElement("button");l.textContent="âŒ",l.addEventListener("click",()=>e(t.id)),o.append(n,l),s.appendChild(o)})}function g(i){const e=document.querySelector("#bookForm"),r=document.querySelector("#title"),s=document.querySelector("#author"),t=document.querySelector("#category");Object.values(d).forEach(o=>{const n=document.createElement("option");n.value=o,n.textContent=o,t.appendChild(n)}),e.addEventListener("submit",o=>{o.preventDefault(),i({title:r.value,author:s.value,category:t.value}),e.reset()})}function c(i){const e=document.querySelector('#bookForm button[type="submit"]');e.textContent=i?"ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ½Ð¸Ð³Ñƒ":"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ½Ð¸Ð³Ñƒ"}console.log("formView loaded");class p{selectedCategory=null;editingId=null;library;constructor(e){this.library=e,g(this.handleAddBook),c(!1),this.render()}handleCategorySelect=e=>{this.selectedCategory=e,this.render()};handleEditBook=e=>{this.editingId=e.id,document.querySelector("#title").value=e.title,document.querySelector("#author").value=e.author,document.querySelector("#category").value=e.category,c(!0)};handleAddBook=e=>{this.editingId?(this.library.update({id:this.editingId,...e}),this.editingId=null,c(!1)):this.library.add({id:crypto.randomUUID(),...e}),this.render()};handleDeleteBook=e=>{this.library.delete(e),this.render()};render(){const e=this.library.getAll();m(this.selectedCategory,e,this.handleCategorySelect);const r=this.selectedCategory?this.library.getByCategory(this.selectedCategory):e;f(r,this.handleDeleteBook,this.handleEditBook)}}const v=new h;new p(v);
